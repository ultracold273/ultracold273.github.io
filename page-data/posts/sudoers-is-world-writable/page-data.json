{"componentChunkName":"component---src-templates-post-tsx","path":"/posts/sudoers-is-world-writable/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p>记录以避免再次犯错</p>\n</blockquote>\n<h2>前因</h2>\n<p>今天修改.bashrc中的环境配置时，不小心把$PATH删除了。后来发现后添加回去后Terminal中出现如下错误：</p>\n<pre><code>sudo: /etc/sudoers is world writable\nsudo: no valid sudoers sources found, quitting\n</code></pre>\n<!--more-->\n<p>这是因为sudoers的权限不对而出现的问题。</p>\n<h2>后果</h2>\n<p>在网上搜索后知道了解决方法是进入ubuntu的recovery mode将<code>/etc/soduers</code>的权限改为0440.</p>\n<p>然而这需要在recovery下使用root帐号，由于我没有设置root密码所以无法解决。</p>\n<p>最后终于找到了解决的办法，为了防止下次再次如此麻烦，将其记录下来。</p>\n<h4>具体步骤：</h4>\n<ul>\n<li>开机按<code>Esc</code>进入GRUB，选择第二项</li>\n<li>选择recovery mode（一般是第二项），按<code>e</code>进入编辑</li>\n<li>将其中的<code>ro recovery nomodeset</code> 改为 <code>rw single init=/bin/bash</code></li>\n<li>按F10，进入单用户模式，即root用户</li>\n<li>输入 <code>chomd 0440 /etc/sudoers</code> 修改权限</li>\n<li>按Ctrl + Alt + Del 重启</li>\n</ul>\n<p>重启后就可以使用sudo。这里出现了一个提示，进入/etc目录删除sudoers.d文件夹即可解决。</p>","rawMarkdownBody":"> 记录以避免再次犯错\r\n\r\n## 前因\r\n今天修改.bashrc中的环境配置时，不小心把$PATH删除了。后来发现后添加回去后Terminal中出现如下错误：\r\n\r\n\tsudo: /etc/sudoers is world writable\r\n\tsudo: no valid sudoers sources found, quitting\r\n\r\n<!--more-->\r\n\r\n这是因为sudoers的权限不对而出现的问题。\r\n\r\n## 后果\r\n在网上搜索后知道了解决方法是进入ubuntu的recovery mode将`/etc/soduers`的权限改为0440.\r\n\r\n然而这需要在recovery下使用root帐号，由于我没有设置root密码所以无法解决。\r\n\r\n最后终于找到了解决的办法，为了防止下次再次如此麻烦，将其记录下来。\r\n\r\n#### 具体步骤：\r\n- 开机按`Esc`进入GRUB，选择第二项\r\n- 选择recovery mode（一般是第二项），按`e`进入编辑\r\n- 将其中的`ro recovery nomodeset` 改为 `rw single init=/bin/bash`\r\n- 按F10，进入单用户模式，即root用户\r\n- 输入 `chomd 0440 /etc/sudoers` 修改权限\r\n- 按Ctrl + Alt + Del 重启\r\n\r\n重启后就可以使用sudo。这里出现了一个提示，进入/etc目录删除sudoers.d文件夹即可解决。\r\n","frontmatter":{"title":"sudoers is world writable","date":"2015年8月30日","tags":["Linux"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/sudoers-is-world-writable/"}}}