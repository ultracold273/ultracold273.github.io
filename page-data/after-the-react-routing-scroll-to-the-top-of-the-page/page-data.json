{"componentChunkName":"component---src-templates-post-tsx","path":"/after-the-react-routing-scroll-to-the-top-of-the-page/","result":{"data":{"markdownRemark":{"html":"<p>在 React 组件间进行页面跳转后，发现页面的位置并不在页面顶部，而是在页面跳转前的位置。就是说浏览器的滚动条并没有回到顶部的位置。</p>\n<p>经过搜索之后找到了解决方案：<a href=\"http://stackoverflow.com/questions/33188994/scroll-to-the-top-of-the-page-after-render-in-react-js\">Scroll to the top of the page after render in react.js</a></p>\n<p>可以使用下面这种解决，但是这种方式不是一种很好的解决方法。而且 <code>scrollIntoView()</code> 方法并不回到页面的顶部，应该使用 <code>scrollTop = 0</code> 的方式。</p>\n<pre><code class=\"language-js\">componentDidUpdate = () => { ReactDom.findDOMNode(this).scrollIntoView(); }\n</code></pre>\n<p>所以得到的解决方案是：</p>\n<pre><code class=\"language-js\">componentDidUpdate() {\n  ReactDOM.findDOMNode(this).scrollTop = 0\n}\n</code></pre>\n<!--more-->\n<p>但是我使用这个之后，ESlint 报了个错：<code>no-find-dom-node</code>。\n查看 <code>eslint-plugin-react</code> 的<a href=\"https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/no-find-dom-node.md\">文档</a>可以看到 Facebook 不推荐使用 <code>findDOMNode</code>，推荐使用 <code>refs</code> 获取 DOM 节点。</p>\n<p>所以推荐的使用方法是：</p>\n<pre><code class=\"language-js\">class MyComponent extends Component {\n  componentDidMount() {\n    this.node.scrollIntoView();\n  }\n  render() {\n    return &#x3C;div ref={node => this.node = node} />\n  }\n}\n</code></pre>","rawMarkdownBody":"\n在 React 组件间进行页面跳转后，发现页面的位置并不在页面顶部，而是在页面跳转前的位置。就是说浏览器的滚动条并没有回到顶部的位置。\n\n经过搜索之后找到了解决方案：[Scroll to the top of the page after render in react.js](http://stackoverflow.com/questions/33188994/scroll-to-the-top-of-the-page-after-render-in-react-js)\n\n可以使用下面这种解决，但是这种方式不是一种很好的解决方法。而且 `scrollIntoView()` 方法并不回到页面的顶部，应该使用 `scrollTop = 0` 的方式。\n\n``` js\ncomponentDidUpdate = () => { ReactDom.findDOMNode(this).scrollIntoView(); }\n```\n\n所以得到的解决方案是：\n\n``` js\ncomponentDidUpdate() {\n  ReactDOM.findDOMNode(this).scrollTop = 0\n}\n```\n\n<!--more-->\n\n但是我使用这个之后，ESlint 报了个错：`no-find-dom-node`。\n查看 `eslint-plugin-react` 的[文档](https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/no-find-dom-node.md)可以看到 Facebook 不推荐使用 `findDOMNode`，推荐使用 `refs` 获取 DOM 节点。\n\n所以推荐的使用方法是：\n\n``` js\nclass MyComponent extends Component {\n  componentDidMount() {\n    this.node.scrollIntoView();\n  }\n  render() {\n    return <div ref={node => this.node = node} />\n  }\n}\n```\n","frontmatter":{"title":"React 路由跳转后回到页面顶部","date":"2016年10月11日","tags":["React","前端","JavaScript"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/after-the-react-routing-scroll-to-the-top-of-the-page/"}}}